<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>Admin Upload Ads</title>
</head>
<body>
<h2>Upload quảng cáo</h2>
<input type="file" id="fileInput" accept="image/*" />
<button id="uploadBtn">Upload</button>


<script type="module">
import { app, db, storage } from './firebase.js';
import { ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";
import { collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";


const fileInput = document.getElementById('fileInput');


document.getElementById('uploadBtn').onclick = async () => {
const file = fileInput.files[0];
if (!file) return alert('Chọn ảnh trước');


const storageRef = ref(storage, `ads/${Date.now()}_${file.name}`);
await uploadBytes(storageRef, file);
const imageUrl = await getDownloadURL(storageRef);


await addDoc(collection(db, 'ads'), {
imageUrl,
createdAt: serverTimestamp()
});


alert('Upload thành công');
fileInput.value = '';
};
</script>
</body>
</html>